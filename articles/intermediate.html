<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intermediate: Module Building • rOpenSci: outsider.devtools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="Intermediate: Module Building">
<meta property="og:description" content="outsider.devtools">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>outsider.devtools <small>v0.1.0</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Module Building
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic.html">Basic</a>
    </li>
    <li>
      <a href="../articles/intermediate.html">Intermediate</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faqs.html">FAQs</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/outsider.devtools">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Intermediate: Module Building</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/outsider.devtools/blob/master/vignettes/intermediate.Rmd"><code>vignettes/intermediate.Rmd</code></a></small>
      <div class="hidden name"><code>intermediate.Rmd</code></div>

    </div>

    
    
<p>In <a href="https://docs.ropensci.org/outsider.devtools/articles/intermediate.html">basics</a> we introduced the essential elements that make up a module and then built a super simple module.</p>
<p>On this page, we will build a module for a slightly more complex program while introducing some more functionalities of <code>outsider</code>.</p>
<div id="figlet" class="section level2">
<h2 class="hasAnchor">
<a href="#figlet" class="anchor"></a><code>figlet</code>
</h2>
<p>For this walkthrough, we will be creating a slightly more sophisticated module than <code>om..echo</code> by building a module for <a href="http://www.figlet.org/"><code>figlet</code></a>, a program that takes textual input and returns ASCII art.</p>
<p>The program itself only takes text input and returns text output. We, however, will use <code>outsider</code> to create a module that can either take an input file or text and then return ASCII art to either the console or to an output file.</p>
<p>Not all command-line programs follow the same standards (different input/output file arguments, different help pages …), so <code>outsider</code> comes with a series of functions to provide options for developers for how best they want to encapsulate the program in module form.</p>
<p>(For reference, this module does already exist in the wild: <a href="https://github.com/DomBennett/om..figlet">dombennett/om..figlet</a>)</p>
</div>
<div id="walkthrough" class="section level1">
<h1 class="hasAnchor">
<a href="#walkthrough" class="anchor"></a>Walkthrough</h1>
<div id="building" class="section level2">
<h2 class="hasAnchor">
<a href="#building" class="anchor"></a>Building</h2>
<p>To get started, we will first need our module skeleton.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/outsider.devtools">outsider.devtools</a></span><span class="op">)</span>
<span class="va">flpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_skeleton.html">module_skeleton</a></span><span class="op">(</span>repo_user <span class="op">=</span> <span class="st">'dombennett'</span>, program_name <span class="op">=</span> <span class="st">'figlet'</span>,
                         docker_user <span class="op">=</span> <span class="st">'dombennett'</span>, flpth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
                         service <span class="op">=</span> <span class="st">'github'</span><span class="op">)</span>
<span class="co"># folder name where module is stored</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="va">flpth</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "om..figlet"</code></pre>
<p>Next we will need to develop the Dockerfile! <code>figlet</code> is easy enough to install on Ubuntu Linux, we can just use the “apt-get” system to install it. (Here I’m editing the file from within R to make the process reproducible, you can edit the file directly with a text editor.)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dockerfile_text</span> <span class="op">&lt;-</span> <span class="st">"
# select Ubuntu Linux image
FROM ubuntu:latest
# Use the 'apt-get' system to install figlet
RUN apt-get update &amp;&amp; apt-get install -y figlet
# set the working_dir/
RUN mkdir /working_dir
WORKDIR /working_dir
"</span>
<span class="co"># write to latest Dockerfile</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">dockerfile_text</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">flpth</span>, <span class="st">'inst'</span>, <span class="st">'dockerfiles'</span>, <span class="st">'latest'</span>,
                                      <span class="st">'Dockerfile'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now, we have our Dockerfile set-up and our module skeleton, we must develop the R code. The skeleton code for our <code>figlet</code>-module is currently:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @name figlet</span>
<span class="co">#' @title figlet</span>
<span class="co">#' @description Run figlet</span>
<span class="co">#' @param ... Arguments</span>
<span class="co">#' @example /examples/example.R</span>
<span class="co">#' @export</span>
<span class="va">figlet</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># convert the ... into a argument list</span>
  <span class="va">arglist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/arglist_get.html">arglist_get</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
  <span class="co"># create an outsider object: describe the arguments and program</span>
  <span class="va">otsdr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/outsider-class.html">outsider_init</a></span><span class="op">(</span>pkgnm <span class="op">=</span> <span class="st">'om..figlet'</span>, cmd <span class="op">=</span> <span class="st">'figlet'</span>,
                         arglist <span class="op">=</span> <span class="va">arglist</span><span class="op">)</span>
  <span class="co"># run the command</span>
  <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/outsider-class.html">run</a></span><span class="op">(</span><span class="va">otsdr</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The above function would work fine. It would pass any arguments from the user in R to the <code>figlet</code> program. But because <code>figlet</code> does not come with input/output arguments, we will need to hardcode these into our function and use some if statements and bash to create this functionality. Because this will require calling several commands via the terminal, we can create a shell script that we can then pass through <code>outsider</code> to our container.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">function_text</span> <span class="op">&lt;-</span> <span class="st">[1719 chars quoted with '"']</span>
<span class="co"># write to R/functions.R</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">function_text</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">flpth</span>, <span class="st">'R'</span>, <span class="st">'functions.R'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<blockquote>
<p><strong>What does <code>arglist</code> do?</strong> This function takes R objects and converts them into character strings that then be passed to a command-line program. It can take as many arguments as you want. For example, with <code>figlet</code> you may want to convert the value of <code>a</code> to ASCII art. In this way, you would simply be able to pass <code>a</code> to the <code>figlet</code> function rather than spell it out again.</p>
</blockquote>
<blockquote>
<p><strong>What’s with the <code>#'@</code>?</strong> These are the roxygen tags. They determine the documentation of the function. See <a href="http://r-pkgs.had.co.nz/man.html">“Object documentation”</a> for more details.</p>
</blockquote>
<p>Ok, let’s build the module!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_build.html">module_build</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::document() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Updating om..figlet documentation</code></pre>
<pre><code>## First time using roxygen2. Upgrading automatically...</code></pre>
<pre><code>## Updating roxygen version in /private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..figlet/DESCRIPTION</code></pre>
<pre><code>## Writing NAMESPACE</code></pre>
<pre><code>## Loading om..figlet</code></pre>
<pre><code>## Writing NAMESPACE
## Writing figlet.Rd
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::install() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
##   
   checking for file ‘/private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..figlet/DESCRIPTION’ ...
  
✓  checking for file ‘/private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..figlet/DESCRIPTION’
## 
  
─  preparing ‘om..figlet’:
##    checking DESCRIPTION meta-information ...
  
✓  checking DESCRIPTION meta-information
## 
  
─  checking for LF line-endings in source and make files and shell scripts
## 
  
─  checking for empty or unneeded directories
## 
  
─  building ‘om..figlet_0.0.1.tar.gz’
## 
  
   
## 
Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T//RtmpquGDgt/om..figlet_0.0.1.tar.gz --install-tests 
## 
-
* installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## 
|
* installing *source* package ‘om..figlet’ ...
## 
-
** using staged installation
## 
|
** R
## 
-
** inst
## 
|
** byte-compile and prepare package for lazy loading
## 
-

|
** help
## 
-
*** installing help indices
## 
|
** building package indices
## 
-
** testing if installed package can be loaded from temporary location
## 
|
** testing if installed package can be loaded from final location
## 
-
** testing if installed package keeps a record of temporary installation path
## 
|
* DONE (om..figlet)
## 
-

|

 
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running docker_build()
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Command:
## docker build -t dombennett/om_figlet:latest /Library/Frameworks/R.framework/Versions/3.6/Resources/library/om..figlet/dockerfiles/latest
## .....................................................................................................................
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::build_readme() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Building om..figlet readme</code></pre>
<p>Does it work?</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/outsider">outsider</a></span><span class="op">)</span>
<span class="va">figlet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider/reference/module_import.html">module_import</a></span><span class="op">(</span><span class="st">'figlet'</span>, repo <span class="op">=</span> <span class="st">'dombennett/om..figlet'</span><span class="op">)</span>
<span class="co"># without files</span>
<span class="fu">figlet</span><span class="op">(</span>arglist <span class="op">=</span> <span class="st">'hello!'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "figlet hello!"</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># with input file</span>
<span class="va">input_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'input_figlet.txt'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'This is from the input text file!'</span>, file <span class="op">=</span> <span class="va">input_file</span><span class="op">)</span>
<span class="fu">figlet</span><span class="op">(</span>arglist <span class="op">=</span> <span class="st">''</span>, input_file <span class="op">=</span> <span class="va">input_file</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "cat input_figlet.txt | figlet "</code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># with output file</span>
<span class="va">output_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'output_figlet.txt'</span><span class="op">)</span>
<span class="fu">figlet</span><span class="op">(</span>arglist <span class="op">=</span> <span class="st">'Into the output file'</span>, output_file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "figlet Into the output file &gt; output_figlet.txt"</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></code></pre></div>
<pre><code>##  ___       _          _   _                        _               _   
## |_ _|_ __ | |_ ___   | |_| |__   ___    ___  _   _| |_ _ __  _   _| |_ 
##  | || '_ \| __/ _ \  | __| '_ \ / _ \  / _ \| | | | __| '_ \| | | | __|
##  | || | | | || (_) | | |_| | | |  __/ | (_) | |_| | |_| |_) | |_| | |_ 
## |___|_| |_|\__\___/   \__|_| |_|\___|  \___/ \__,_|\__| .__/ \__,_|\__|
##                                                       |_|              
##   __ _ _      
##  / _(_) | ___ 
## | |_| | |/ _ \
## |  _| | |  __/
## |_| |_|_|\___|
## </code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># from input file to output file... with font block!</span>
<span class="fu">figlet</span><span class="op">(</span>arglist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'-f'</span>, <span class="st">'block'</span><span class="op">)</span>, input_file <span class="op">=</span> <span class="va">input_file</span>,
       output_file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "cat input_figlet.txt | figlet -f block &gt; output_figlet.txt"</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span>con <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></code></pre></div>
<pre><code>##                                                       
## _|_|_|_|_|  _|        _|                _|            
##     _|      _|_|_|          _|_|_|            _|_|_|  
##     _|      _|    _|  _|  _|_|          _|  _|_|      
##     _|      _|    _|  _|      _|_|      _|      _|_|  
##     _|      _|    _|  _|  _|_|_|        _|  _|_|_|    
##                                                       
##                                                       
##                                               
##     _|_|                                      
##   _|      _|  _|_|    _|_|    _|_|_|  _|_|    
## _|_|_|_|  _|_|      _|    _|  _|    _|    _|  
##   _|      _|        _|    _|  _|    _|    _|  
##   _|      _|          _|_|    _|    _|    _|  
##                                               
##                                               
##                                                                               
##   _|      _|                      _|                                  _|      
## _|_|_|_|  _|_|_|      _|_|            _|_|_|    _|_|_|    _|    _|  _|_|_|_|  
##   _|      _|    _|  _|_|_|_|      _|  _|    _|  _|    _|  _|    _|    _|      
##   _|      _|    _|  _|            _|  _|    _|  _|    _|  _|    _|    _|      
##     _|_|  _|    _|    _|_|_|      _|  _|    _|  _|_|_|      _|_|_|      _|_|  
##                                                 _|                            
##                                                 _|                            
##                                                                             
##   _|                            _|              _|_|  _|  _|            _|  
## _|_|_|_|    _|_|    _|    _|  _|_|_|_|        _|          _|    _|_|    _|  
##   _|      _|_|_|_|    _|_|      _|          _|_|_|_|  _|  _|  _|_|_|_|  _|  
##   _|      _|        _|    _|    _|            _|      _|  _|  _|            
##     _|_|    _|_|_|  _|    _|      _|_|        _|      _|  _|    _|_|_|  _|  
##                                                                             
## </code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># clean-up</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">input_file</span>, <span class="va">output_file</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
</div>
<div id="check-test-and-deploy" class="section level2">
<h2 class="hasAnchor">
<a href="#check-test-and-deploy" class="anchor"></a>Check, test and deploy</h2>
<p>Ok! So we have a functioning module. But how do we know it’s a functioning module? To check our module structure, configuration and functioning we have a few helpful functions.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># make sure the folder structure is correct</span>
<span class="fu"><a href="../reference/module_check.html">module_check</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## DESCRIPTION found ✓
## R folder with files found ✓
## inst found ✓
## inst/om.yml found ✓
## inst/dockerfiles found ✓
## inst/dockerfiles/latest with one Dockerfile found ✓</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># check are the names of the module components</span>
<span class="fu"><a href="../reference/module_identities.html">module_identities</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## R package name: 'om..figlet'
## URL: 'https://github.com/dombennett/om..figlet'
## Docker images: 'dombennett/om_figlet:latest'</code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># test that the module works</span>
<span class="co"># module_test(flpth = flpth)</span></code></pre></div>
<p>Running <code>module_test</code> we will find that there is an issue with the module. <code>module_test</code> checks the functioning of the code by running the example; our current example tries to call <code>-h</code> with <code>figlet</code> – which is an invalid argument. To correct this we can simply updated our example.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">example_text</span> <span class="op">&lt;-</span> <span class="st">"
library(outsider)
figlet &lt;- module_import('figlet', repo = 'dombennett/om..figlet')
figlet('hello!')
"</span>
<span class="co"># write to examples/example.R</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">example_text</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">flpth</span>, <span class="st">'examples'</span>, <span class="st">'example.R'</span><span class="op">)</span><span class="op">)</span>
<span class="co"># re-build package</span>
<span class="fu"><a href="../reference/module_build.html">module_build</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span>, build_image <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::document() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Updating om..figlet documentation</code></pre>
<pre><code>## Writing NAMESPACE</code></pre>
<pre><code>## Loading om..figlet</code></pre>
<pre><code>## Writing NAMESPACE
## Writing figlet.Rd
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::install() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## 
## Attaching package: 'om..figlet'</code></pre>
<pre><code>## The following object is masked _by_ '.GlobalEnv':
## 
##     figlet</code></pre>
<pre><code>## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::build_readme() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Building om..figlet readme</code></pre>
<p>Now re-running the test …</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_test.html">module_test</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..figlet --install-tests 
## * installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## 
-
* installing *source* package ‘om..figlet’ ...
## 
|
** using staged installation
## 
-
** R
## 
|
** inst
## 
-
** byte-compile and prepare package for lazy loading
## 
|

-
** help
## 
|
*** installing help indices
## 
-
** building package indices
## 
|
** testing if installed package can be loaded from temporary location
## 
-
** testing if installed package can be loaded from final location
## 
|
** testing if installed package keeps a record of temporary installation path
## 
-
* DONE (om..figlet)
## 
|

-

 </code></pre>
<pre><code>## 
## Attaching package: 'om..figlet'</code></pre>
<pre><code>## The following object is masked _by_ '.GlobalEnv':
## 
##     figlet</code></pre>
<pre><code>## [1] "figlet hello!"</code></pre>
<pre><code>## Removing package from '/Library/Frameworks/R.framework/Versions/3.6/Resources/library'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## Yikes! The module works! You are super-excellent!</code></pre>
<p>Nice! The package passes. That means we can upload the package to GitHub and Docker-Hub using the same functions as we saw in “basic”.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_upload.html">module_upload</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span>, code_sharing <span class="op">=</span> <span class="cn">TRUE</span>, dockerhub <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<hr>
<p><strong>Delete it all</strong></p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://docs.ropensci.org/outsider/reference/module_uninstall.html">module_uninstall</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">'om..figlet'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">flpth</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<hr>
</div>
<div id="next-up-advanced" class="section level2">
<h2 class="hasAnchor">
<a href="#next-up-advanced" class="anchor"></a>Next-up: <a href="https://docs.ropensci.org/outsider.devtools/articles/advanced.html">Advanced</a>
</h2>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-outsider.devtools',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
