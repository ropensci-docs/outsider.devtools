<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced: Building a module • rOpenSci: outsider.devtools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="Advanced: Building a module">
<meta property="og:description" content="outsider.devtools">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>outsider.devtools <small>v0.1.0</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Module Building
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic.html">Basic</a>
    </li>
    <li>
      <a href="../articles/intermediate.html">Intermediate</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faqs.html">FAQs</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/outsider.devtools">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Advanced: Building a module</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/outsider.devtools/blob/master/vignettes/advanced.Rmd"><code>vignettes/advanced.Rmd</code></a></small>
      <div class="hidden name"><code>advanced.Rmd</code></div>

    </div>

    
    
<p>In <a href="https://docs.ropensci.org/outsider.devtools/articles/intermediate.html">intermediate</a> we demonstrated how a complex, command-line program with input and output files (that we partly developed) can be cast as an <code>outsider</code> module.</p>
<p>On this page, we will develop a module for a typical command-line program with lots of arguments.</p>
<div id="raxml" class="section level2">
<h2 class="hasAnchor">
<a href="#raxml" class="anchor"></a><a href="https://cme.h-its.org/exelixis/web/software/raxml/"><code>RAxML</code></a>
</h2>
<p>For this walkthrough we will create a module for “RAxML” a program that can generate evolutionary trees using a maximum-likelihood. The exact functioning (or use even!) of the program is not relevant, but it demonstrates well the typical program which <code>outsider</code> aims to bring into the R environment: lots of arguments, complex algorithm developed in an alternative language.</p>
<p>To demonstrate the program’s complexity, here is the command’s syntax:</p>
<pre><code>raxmlHPC[-SSE3|-AVX|-PTHREADS|-PTHREADS-SSE3|-PTHREADS-AVX|-HYBRID|-HYBRID-SSE3|HYBRID-AVX]
      -s sequenceFileName -n outputFileName -m substitutionModel
      [-a weightFileName] [-A secondaryStructureSubstModel]
      [-b bootstrapRandomNumberSeed] [-B wcCriterionThreshold]
      [-c numberOfCategories] [-C] [-d] [-D]
      [-e likelihoodEpsilon] [-E excludeFileName]
      [-f a|A|b|B|c|C|d|D|e|E|F|g|G|h|H|i|I|j|J|k|m|n|N|o|p|P|q|r|R|s|S|t|T|u|v|V|w|W|x|y] [-F]
      [-g groupingFileName] [-G placementThreshold] [-h] [-H]
      [-i initialRearrangementSetting] [-I autoFC|autoMR|autoMRE|autoMRE_IGN]
      [-j] [-J MR|MR_DROP|MRE|STRICT|STRICT_DROP|T_&lt;PERCENT&gt;] [-k] [-K] 
      [-L MR|MRE|T_&lt;PERCENT&gt;] [-M]
      [-o outGroupName1[,outGroupName2[,...]]][-O]
      [-p parsimonyRandomSeed] [-P proteinModel]
      [-q multipleModelFileName] [-r binaryConstraintTree]
      [-R binaryModelParamFile] [-S secondaryStructureFile] [-t userStartingTree]
      [-T numberOfThreads] [-u] [-U] [-v] [-V] [-w outputDirectory] [-W slidingWindowSize]
      [-x rapidBootstrapRandomNumberSeed] [-X] [-y] [-Y quartetGroupingFileName|ancestralSequenceCandidatesFileName]
      [-z multipleTreesFile] [-#|-N numberOfRuns|autoFC|autoMR|autoMRE|autoMRE_IGN]
      [--mesquite][--silent][--no-seq-check][--no-bfgs]
      [--asc-corr=stamatakis|felsenstein|lewis]
      [--flag-check][--auto-prot=ml|bic|aic|aicc]
      [--epa-keep-placements=number][--epa-accumulated-threshold=threshold]
      [--epa-prob-threshold=threshold]
      [--JC69][--K80][--HKY85]
      [--bootstop-perms=number]
      [--quartets-without-replacement]
      [---without-replacement]
      [--print-identical-sequences]</code></pre>
<p>How are we going to code a module that is able to account for all these arguments?</p>
</div>
<div id="walkthrough" class="section level1">
<h1 class="hasAnchor">
<a href="#walkthrough" class="anchor"></a>Walkthrough</h1>
<div id="building" class="section level2">
<h2 class="hasAnchor">
<a href="#building" class="anchor"></a>Building</h2>
<p>As before, let’s just jump right in with the module skeleton.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/outsider.devtools">outsider.devtools</a></span><span class="op">)</span>
<span class="va">flpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_skeleton.html">module_skeleton</a></span><span class="op">(</span>repo_user <span class="op">=</span> <span class="st">'dombennett'</span>, program_name <span class="op">=</span> <span class="st">'raxml'</span>,
                         docker_user <span class="op">=</span> <span class="st">'dombennett'</span>, flpth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>,
                         service <span class="op">=</span> <span class="st">'github'</span><span class="op">)</span>
<span class="co"># folder name where module is stored</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="va">flpth</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "om..raxml"</code></pre>
<p>Next, the Dockerfile. This is a much more complicated installation process. First we require the apt programs <code>wget</code>, <code>make</code> and <code>gcc</code> to download the program and compile it. Then we need to download and compile the program. The majority of the Dockerfile contents can be found in the installation instructions of the <a href="https://github.com/stamatak/standard-RAxML#readme">RAxML GitHub site</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dockerfile_text</span> <span class="op">&lt;-</span> <span class="st">"
FROM ubuntu:latest
RUN apt-get update &amp;&amp; apt-get install -y \
    wget make gcc
# 8.2 for this demonstration
RUN wget https://github.com/stamatak/standard-RAxML/archive/v8.2.12.tar.gz &amp;&amp; \
    tar zxvf v8.2.12.tar.gz &amp;&amp; \
    rm v8.2.12.tar.gz &amp;&amp; \
    mv standard-RAxML-8.2.12 raxml
RUN cd /raxml &amp;&amp; make -f Makefile.SSE3.PTHREADS.gcc &amp;&amp; \
    rm *.o &amp;&amp; cp raxmlHPC-PTHREADS-SSE3 /usr/bin/.
RUN mkdir /working_dir
WORKDIR /working_dir
"</span>
<span class="co"># write to latest Dockerfile</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">dockerfile_text</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">flpth</span>, <span class="st">'inst'</span>, <span class="st">'dockerfiles'</span>, <span class="st">'latest'</span>,
                                      <span class="st">'Dockerfile'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Dockerfile defined. What should our R function be?</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @name raxml</span>
<span class="co">#' @title raxml</span>
<span class="co">#' @description Run raxml</span>
<span class="co">#' @param arglist Arguments to raxml provided as a character vector</span>
<span class="co">#' @param outdir Filepath to where all output files should be returned.</span>
<span class="co">#' @example examples/example.R</span>
<span class="co">#' @export</span>
<span class="va">raxml</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">arglist</span> <span class="op">=</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/arglist_get.html">arglist_get</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>, <span class="va">outdir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">files_to_send</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/filestosend_get.html">filestosend_get</a></span><span class="op">(</span><span class="va">arglist</span><span class="op">)</span>
  <span class="va">arglist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/arglist_parse.html">arglist_parse</a></span><span class="op">(</span><span class="va">arglist</span><span class="op">)</span>
  <span class="va">otsdr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/outsider-class.html">outsider_init</a></span><span class="op">(</span>pkgnm <span class="op">=</span> <span class="st">'om..raxml'</span>, cmd <span class="op">=</span> <span class="st">'raxmlHPC-PTHREADS-SSE3'</span>,
                         wd <span class="op">=</span> <span class="va">outdir</span>, files_to_send <span class="op">=</span> <span class="va">files_to_send</span>,
                         arglist <span class="op">=</span> <span class="va">arglist</span><span class="op">)</span>
  <span class="fu"><a href="https://docs.ropensci.org/outsider.base/reference/outsider-class.html">run</a></span><span class="op">(</span><span class="va">otsdr</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>In this function, input and output files are intermixed in the arguments passed to RAxML. To determine what is a file that should be sent to the container from a normal argument, we have <code>filestosend_get</code>. This function goes through all the provided arguments to check for any files (it tests whether they are valid file paths) and returns them as a character vector to <code>files_to_send</code>. Then we have <code>arglist_parse</code>, this converts all given arguments to their basename so that absolute filepaths are dropped. All input files will be passed to the containers <code>working_dir/</code> and therefore no parental file path are required. This function has additional functions for dropping irrelevant arguments in the context of an <code>outsider</code> module (e.g. no need to specify an output directory at the command-line, this would need to be done at the initiation of the <code>outsider</code> object.)</p>
<blockquote>
<p><strong>What’s with this <code>outdir</code>-thingy?</strong> The RAxML function returns a series of files. To ensure they are all returned in a convenient location, we have created an additional argument to the <code>raxml()</code> function called <code>outdir</code>. It can be good practice to break-up information that needs to be processed by the module function into things like <code>arglist</code> and <code>outdir</code>. In some instances, you may be calling a program where additional information can be provided outside of remit of the main program being emulated. For example in our last example we had <code>input_file</code> and <code>output_file</code>. Other examples include, number of threads, memory allocation for the program, etc.</p>
</blockquote>
<p>OK! So that’s what the function looks like. Let’s write it to file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">function_text</span> <span class="op">&lt;-</span> <span class="st">"
#' @name raxml
#' @title raxml
#' @description Run raxml
#' @param arglist Arguments to raxml provided as a character vector
#' @param outdir Filepath to where all output files should be returned.
#' @example examples/example.R
#' @export
raxml &lt;- function(arglist = arglist_get(...), outdir = getwd()) {
  files_to_send &lt;- filestosend_get(arglist)
  arglist &lt;- arglist_parse(arglist)
  otsdr &lt;- outsider_init(pkgnm = 'om..raxml', cmd = 'raxmlHPC-PTHREADS-SSE3',
                         wd = outdir, files_to_send = files_to_send,
                         arglist = arglist)
  run(otsdr)
}
"</span>
<span class="co"># write to R/functions.R</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">function_text</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">flpth</span>, <span class="st">'R'</span>, <span class="st">'functions.R'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Let’s check the setup.</p>
<p>Ok, let’s build, test and upload the module! (The test should pass because by default, <code>-h</code> is used in the example and this is a valid argument for RAxML.)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_build.html">module_build</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::document() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Updating om..raxml documentation</code></pre>
<pre><code>## First time using roxygen2. Upgrading automatically...</code></pre>
<pre><code>## Updating roxygen version in /private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..raxml/DESCRIPTION</code></pre>
<pre><code>## Writing NAMESPACE</code></pre>
<pre><code>## Loading om..raxml</code></pre>
<pre><code>## Writing NAMESPACE
## Writing raxml.Rd
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::install() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
##   
   checking for file ‘/private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..raxml/DESCRIPTION’ ...
  
✓  checking for file ‘/private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..raxml/DESCRIPTION’
## 
  
─  preparing ‘om..raxml’:
## 
  
   checking DESCRIPTION meta-information ...
  
✓  checking DESCRIPTION meta-information
## 
  
─  checking for LF line-endings in source and make files and shell scripts
## 
  
─  checking for empty or unneeded directories
## 
  
─  building ‘om..raxml_0.0.1.tar.gz’
## 
  
   
## 
Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T//RtmpquGDgt/om..raxml_0.0.1.tar.gz --install-tests 
## * installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## 
-
* installing *source* package ‘om..raxml’ ...
## 
|
** using staged installation
## 
-
** R
## 
|
** inst
## 
-
** byte-compile and prepare package for lazy loading
## 
|

-
** help
## 
|
*** installing help indices
## 
-
** building package indices
## 
|
** testing if installed package can be loaded from temporary location
## 
-
** testing if installed package can be loaded from final location
## 
|
** testing if installed package keeps a record of temporary installation path
## 
-
* DONE (om..raxml)
## 
|

-

 
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running docker_build()
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Command:
## docker build -t dombennett/om_raxml:latest /Library/Frameworks/R.framework/Versions/3.6/Resources/library/om..raxml/dockerfiles/latest
## .....................................................................................................................
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
## Running devtools::build_readme() ...
## ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Building om..raxml readme</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_test.html">module_test</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<pre><code>## Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /private/var/folders/x9/m8kwpxps2v93xk52zqzm5lkh0000gp/T/RtmpquGDgt/om..raxml --install-tests 
## * installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## 
-
* installing *source* package ‘om..raxml’ ...
## 
|
** using staged installation
## 
-
** R
## 
|
** inst
## 
-
** byte-compile and prepare package for lazy loading
## 
|

-
** help
## 
|
*** installing help indices
## 
-
** building package indices
## 
|
** testing if installed package can be loaded from temporary location
## 
-
** testing if installed package can be loaded from final location
## 
|
** testing if installed package keeps a record of temporary installation path
## 
-
* DONE (om..raxml)
## 
|

-

 </code></pre>
<pre><code>## No Docker image found for 'om..raxml' -- attempting to pull/build image with tag 'latest'</code></pre>
<pre><code>## Removing package from '/Library/Frameworks/R.framework/Versions/3.6/Resources/library'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## The gloating goat got away! The module is not working....
## But keep on forming! You're doing correctly!</code></pre>
<p>And then upload ….</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_upload.html">module_upload</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span>, code_sharing <span class="op">=</span> <span class="cn">TRUE</span>, dockerhub <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="continuous-integration-github-only" class="section level3">
<h3 class="hasAnchor">
<a href="#continuous-integration-github-only" class="anchor"></a>Continuous Integration (GitHub only)</h3>
<p>OK. So you have a module that works and passes its tests. How do we inform the world that it works? The answer: <a href="https://travis-ci.org/">Travis-CI</a></p>
<p>Travis is a free service that monitors your GitHub for updates and then runs a series of tests on a remote server to determine whether it passes its tests or not. The result of these tests can be added to a repo’s README in form of an image badge: e.g. “Tests Passing”.</p>
<p>To set-up travis for your repo, visit the website <a href="https://travis-ci.org/" class="uri">https://travis-ci.org/</a>, sign in with your GitHub account and then activate the service your repo of choice, e.g. <code>om..raxml</code>.</p>
<p>Then we need to provide the test instructions for Travis in the form of a YAML file called <code>.travis.yml</code> and upload this to our GitHub repo. The <code>.travis.yml</code> can be created for <code>outsider</code> modules so:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/module_travis.html">module_travis</a></span><span class="op">(</span>flpth <span class="op">=</span> <span class="va">flpth</span><span class="op">)</span></code></pre></div>
<p>Then simply update the repo on GitHub!</p>
</div>
</div>
<div id="taking-the-module-forward" class="section level2">
<h2 class="hasAnchor">
<a href="#taking-the-module-forward" class="anchor"></a>Taking the module forward</h2>
<p>After you have built a module that passes its tests and is available for download, there are a few extra things to consider:</p>
<ul>
<li>
<strong>Update the <code>om.yml</code></strong> Add a more detailed description</li>
<li>
<strong>Update the README</strong> The default README is very bland. It provides a template for what sorts of things a good README should contain: installation, how to run, where to get more help. Remember to only edit the <code>README.Rmd</code>. To update the <code>README.md</code> for GitHub, you need to “knit” the <code>.Rmd</code> file by running <code><a href="https://devtools.r-lib.org//reference/build_rmd.html">devtools::build_readme()</a></code> – this is the function <code><a href="../reference/module_build.html">module_build()</a></code> runs.</li>
<li>
<strong>Ensure discoverability</strong> <code><a href="https://docs.ropensci.org/outsider/reference/module_search.html">outsider::module_search</a></code> can find <code>outsider</code> module repos on GitHub if they have and <code>om.yml</code>, have their name in the form <code>om..</code> and have the phrase <code>outsider-module:</code> in their description.</li>
</ul>
<hr>
<p><strong>Delete it all</strong></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://docs.ropensci.org/outsider/reference/module_uninstall.html">module_uninstall</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">'om..raxml'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">flpth</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<hr>
</div>
</div>
<div id="tips-and-tricks" class="section level1">
<h1 class="hasAnchor">
<a href="#tips-and-tricks" class="anchor"></a>Tips and tricks</h1>
<ul>
<li>The best way to learn how to build your own module is to look at how others have created modules for programs you are familiar with. Check out the list of already available modules at this <a href="https://docs.ropensci.org/outsider/articles/available.html">page</a>.</li>
<li>If you find issues with the docker image build step, you can try “logging into” a container and running the installation steps to test out what works. At the terminal, use</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># run an ubuntu container</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="ex">docker</span> run -t -d --name test ubuntu:latest</a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co"># iteractively run bash</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="ex">docker</span> exec -it test bash</a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co"># when finished, list all running containers and stop/rm</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="ex">docker</span> ps -a</a>
<a class="sourceLine" id="cb24-7" title="7"><span class="ex">docker</span> stop test</a>
<a class="sourceLine" id="cb24-8" title="8"><span class="ex">docker</span> rm test</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-outsider.devtools',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
